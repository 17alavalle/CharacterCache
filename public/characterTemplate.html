<!DOCTYPE html>
<html>
    <head>
    <title>Character Cache</title>
    <link rel="stylesheet" href="stylesheet.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        //Configure Firebase App
        var firebaseConfig = {
        apiKey: "AIzaSyBO26wJCjlEFzK9GiP7HoIs428bSmr-U0A",
        authDomain: "character-cache-cc142.firebaseapp.com",
        databaseURL: "https://character-cache-cc142.firebaseio.com",
        projectId: "character-cache-cc142",
        storageBucket: "character-cache-cc142.appspot.com",
        messagingSenderId: "1031944349621",
        appId: "1:1031944349621:web:158ad89eda56b305599bfc",
        measurementId: "G-7LMFF4156H"
        };
    </script>
    </head>

    <body>
    <title>Character Cache</title>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-analytics.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.6.1/firebase.js"></script>
    <script src="/__/firebase/7.14.0/firebase-app.js"></script>
    <script src="/__/firebase/7.14.0/firebase-auth.js"></script>
    <script src="/__/firebase/7.14.0/firebase-firestore.js"></script>
    <script>
        firebase.initializeApp({
          apiKey: 'AIzaSyBO26wJCjlEFzK9GiP7HoIs428bSmr-U0A',
          authDomain: 'character-cache-cc142.firebaseapp.com',
          projectId: 'character-cache-cc142'
        });

        var db = firebase.database();

        //Cookie functions
        window.onload = checkCookie();
        function getCookie(username) {
          var decodedCookie = decodeURIComponent(document.cookie);
          var dc = decodedCookie.split(";");
          for (var i = 0; i < dc.length; i++) {
            var c = dc[i];
            while (c.charAt(0) == ' ') {
              c = substring(1);
            }
            if (c.indexOf(username) == 0) {
              return c.substring(username.length, c.length);
            }
            return "";
          }
        }

        function checkCookie() {
          console.log("Checking cookie");
          var user = getCookie("username");
          if (user != "") {
            loggedIn = true;
          }
          console.log("loggedIn: " + loggedIn);
        }

        function getUsername(){
          var usernameWColon=getCookie("username");
          var username=usernameWColon.substring(2);
          return username; 
        }

        function getInputVal(){
            db.ref("characters/CiSMWwACvnJM1gbHyAWv/").once("value").then((snapshot) =>{
                const data = snapshot.val();
                consol.log("single data = ", data);
            })
            .catch((e) => {
                consol.log("error returned - ", e);
            });
        }

        //Get varibale from database
        //Functions to save new Character and Author from quiz to database
        $(document).ready(function () {
          $("#getCharacter").click(function () {
            username=getUsername(); 
            charName = getInputVal("characterName");
            level = getInputVal("level");
            race = getInputVal("race");
            dndClass = getInputVal("class");
            strength = getInputVal("strength");
            dexterity = getInputVal("dexterity");
            constitution = getInputVal("constitution");
            intelligence = getInputVal("intelligence");
            wisdom = getInputVal("wisdom");
            charisma = getInputVal("charisma");
            passiveperc = getInputVal("passiveperc");
            hitpoints = getInputVal("HP");
            armorclass = getInputVal("AC");
            proficiencybonus = getInputVal("PB");
            characterspeed = getInputVal("speed");
            initiative = getInputVal("initiative");
            alignment = getInputVal("alignment");
            background = getInputVal("background");
            traits = getInputVal("traits");
            languages = getInputVal("langs");
            attacks = getInputVal("attacks");
            equipment = getInputVal("equipment");
            description = getInputVal("description");

            getCharacter(username, charName, level, race, dndClass, strength, dexterity, constitution, intelligence, wisdom, charisma,
              passiveperc, hitpoints, armorclass, proficiencybonus, characterspeed, initiative, alignment, background, traits, languages,
              attacks, equipment, description);
            return false;
          });
        });

        
    </script>

    <!-- Nav Bar-->
    <div class="navBar">
        <img class="logo" src="images/Logo no border.png" alt="CharacterCache Logo">
        <a href="home.html">Home</a>
        <a href="create.html">Create A Character</a>
        <a href="about.html">About</a>
        <a href="userProfile.html">User Profile</a>
    </div>

    <div class="charTemplate">
        <div class="basicInfo">
            <div class="charProPic"><img src="images/default profile.png" style="max-width:100%; max-height:100%;"></div>
            <h2>Default Name</h2> <br>
            <h3>Race</h3>
            <h3>Class</h3>
            <h3>Level</h3>
        </div>
        <div class="abilityScoreNumbers">
            <h3>Ability Scores</h3>
            <h4>Str: #</h4>
            <h4>Dex: #</h4>
            <h4>Con: #</h4>
            <h4>Int: #</h4>
            <h4>Wis: #</h4>
            <h4>Char: #</h4>
        </div>
        <div class="basicStats">
            <h3>PB</h3>
            <h3>HP</h3>
            <h3>AC</h3>
            <h3>Speed</h3>
            <h3>Init.</h3>
            <h3>PP</h3>
        </div>
        <div class="attacks">
            <h3>Attacks:</h3>
        </div>
        <div class="extraCharInfo">
            <h3>Alignment</h3>
            <h3>Background</h3>
            <h3>Traits</h3>
            <h3>Languages</h3>
        </div>
        <div class="equipment">
            <h3>Equipment</h3>
        </div>
        <div class="description">
            <h3>Character Description</h3>
        </div>
    </div>


    </body>
</htlm>